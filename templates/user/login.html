<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>百知Python课程管理系统-登录</title>
	<link rel="stylesheet" type="text/css" href="/static/css/reset.css">
	<link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <script type="text/javascript" src="/static/js/jquery-1.12.4.min.js"></script>
    <script>
        $(function () {
            $("#button").click(function () {
                    $.ajax({
                    type:"post",
                    url:"{% url 'user:login_logic' %}",
                    data: $("#a").serialize(),
                    success:function (resp) {
                        console.log(25,resp)
                        if(resp==='yes'){
                            console.log(11111)
                            location.href="{% url 'course:index' %}"
                        }
                        else if(resp==='no'){
                            alert("请求激活被驳回，登录失败!")
                        }
                        else if(resp==="n"){
                             alert("账号未激活，是否重新发送邮件")
                        }
                    }
                })
            })

        })


        $(function () {
            $(".name_input").blur(function () {
                var username=$('[name="username"]').val()
                var username1=document.getElementById('name')
                if(username===""){
                    username1.innerHTML="用户名不能为空"
                    username1.style.display="inline-block"
                }else{
                    var regex= /^[\u4E00-\u9FA5]{2,10}$/
                    var result=regex.test(username)
                    if(result){
                        var name=document.getElementById('name')
                        name.style.display="none"
                    }else{
                        var name1=document.getElementById('name')
                        name1.innerHTML="请输入2-10位中文用户名"
                        name1.style.display="inline-block"

                    }

                }

            })

        })



        $(function () {
            $(".pass_input").blur(function () {
                var pwd=$('[name="pwd"]').val()
                var pw=document.getElementById('pw')
                if(pwd===""){
                    pw.innerHTML="密码不能为空"
                    pw.style.display="inline-block"
                }else {
                    var regex=  /^[a-zA-Z0-9]{6,18}$/
                    var result=regex.test(pwd)
                    if(result){
                        pw.style.display="none"
                    }else{
                        pw.innerHTML="密码必须为6到18位字母、数字或下划线"
                        pw.style.display="inline-block"

                    }
                }

            })

        })



    </script>
</head>
<body>
	<div class="login_top clearfix">
		<a href="../course/index.html" class="login_logo" style="font-size: 30px;">
            <img src="/static/images/bz_logo.gif">
            <span style="color:black;font-size: 15px;">站在时代风口，抢占人工智能</span>
        </a>
	</div>

	<div class="login_form_bg">
		<div class="login_form_wrap clearfix">
			<div class="login_banner fl"></div>
			<div class="slogan fl">百知教育 · 课程系统</div>
			<div class="login_form fr">
				<div class="login_title clearfix">
					<h1>用户登录</h1>
					<a href="{% url 'user:register' %}">立即注册</a>
				</div>
				<div class="form_input">
					<form action=""  method="post" id="a">
                        {% csrf_token %}
						<input type="text" name="username" class="name_input" placeholder="请输入用户名">
						<div class="user_error" id="name">输入错误</div>
						<input type="password" name="pwd" class="pass_input" placeholder="请输入密码">
						<div class="pwd_error" id="pw">输入错误</div>
						<div class="more_input clearfix">
							<input type="checkbox" name="remember" value=1>
							<label>记住用户名</label>
							<a href="forget_pwd.html">忘记密码</a>
						</div>
						<input type="button" name="" value="登录" class="input_submit" id="button">
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="footer no-mp">
		<div class="foot_link">
			<a href="#">关于我们</a>
			<span>|</span>
			<a href="#">联系我们</a>
			<span>|</span>
			<a href="#">招聘人才</a>
			<span>|</span>
			<a href="#">友情链接</a>
		</div>
		<p>CopyRight © 2020 北京百知教育科技有限公司 All Rights Reserved</p>
		<p>电话：010-****888    京ICP备*******8号</p>
	</div>

</body>
</html>
